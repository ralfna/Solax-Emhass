
rest_command:
  weather_forecast_cache:
    url: "http://localhost:5000/action/weather-forecast-cache"
    method: POST
    content_type: "application/json"
    payload: "{}"
    
  emhass_mlforecast_fit:
    url: "http://localhost:5000/action/forecast-model-fit"
    method: POST
    headers:
      Content-Type: application/json
    payload: >
      {
        "historic_days_to_retrieve": 9,
        "model_type": "long_train_data",
        "var_model": "sensor.qcells_house_load",
        "sklearn_model": "KNeighborsRegressor",
        "num_lags":96,
        "split_date_delta": "48h",
        "perform_backtest": false
      }
      
  emhass_mlforecast_tune:
    url: "http://localhost:5000/action/forecast-model-tune"
    method: POST
    headers:
      Content-Type: application/json
    payload: >
      {
        "historic_days_to_retrieve": 9,
        "model_type": "long_train_data",
        "var_model": "sensor.qcells_house_load",
        "sklearn_model": "KNeighborsRegressor",
        "num_lags":96,
        "split_date_delta": "48h",
        "perform_backtest": false
      }
      
     
  emhass_mlforecast_predict:
    url: "http://localhost:5000/action/forecast-model-predict"
    method: POST
    headers:
      Content-Type: application/json
    payload: >
      {
        "model_type": "long_train_data",
        "model_predict_publish": true,
        "model_predict_entity_id": "sensor.p_load_forecast_custom_model",
        "model_predict_unit_of_measurement": "W",
        "model_predict_friendly_name": "Load Power Forecast custom ML model"
      }
      
  emhass_dayahead:
    url: "http://localhost:5000/action/dayahead-optim"
    method: POST
    headers:
      Content-Type: application/json
    payload: >
      {
        "pv_power_forecast":{{ state_attr('sensor.emhass_solcast_pv_forecast', 'pv_power_forecast') | to_json}},
        "delta_forecast_daily": 1,
        "optimization_time_step":15,
        "load_cost_forecast": {{ state_attr('sensor.emhass_epex_forecast', 'load_cost_forecast') | to_json}},
        "load_power_forecast": {{ state_attr('sensor.emhass_load_forecast_dict_local', 'load_forecast') | to_json}}
      }
      
  emhass_naive_mpc_optim_forecast:
    url: http://localhost:5000/action/naive-mpc-optim
    method: POST
    content_type: "application/json"
    timeout: 30
    payload: "{{ state_attr('sensor.emhass_mpc_payload','payload') }}"

  emhass_publish_data:
    url: http://localhost:5000/action/publish-data
    method: POST
    content_type: 'application/json'
    payload: >-
      {"publish_prefix": "{{ prefix | default('') }}"}



